function getParameterByName(n,t){t||(t=window.location.href);n=n.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+n+"(=([^&#]*)|&|#|$)"),i=r.exec(t);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}function myPageLoad(){WebThumbnailViewer1.UrlChanged=OnThumbnailUrlChanged;WebThumbnailViewer1.ThumbnailDropServer=OnThumbnailsReordered;WebThumbnailViewer1.ThumbnailClicked=OnThumbnailClicked;WebThumbnailViewer1.ThumbnailDropServer=OnThumbnailDroppedServer;WebAnnotationViewer1.SelectionChanged=OnAddAnnotationText;GetCustomTextList()}function OnAddAnnotationText(){var i=WebAnnotationViewer1.getSelectedAnnotations(),n=i[0],t;n!==null&&(t=n.getType(),t==="TextData"&&n.ShowEditor())}function AppendStatus(n){$("#status").append("<p>"+n+"<\/p>")}function OnThumbnailUrlChanged(){var n=WebThumbnailViewer1.getCount();WebThumbnailViewer1.SelectThumb(0)}function OnThumbnailsReordered(n){WebThumbnailViewer1.SelectThumb(n.dropIndex)}function OnThumbnailClicked(){var n=WebThumbnailViewer1.getSelectedIndex()}function OnThumbnailDroppedServer(n){DragDropLayers(n.dragIndex,n.dropIndex)}function DragDropLayers(n,t){WebAnnotationViewer1.RemoteInvoked=DragDropLayersCallBack;WebAnnotationViewer1.RemoteInvoke("Remote_DragDropLayers",[n,t])}function DragDropLayersCallBack(){WebAnnotationViewer1.RemoteInvoked=function(){};WebThumbnailViewer1.SelectThumb(parseInt(WebAnnotationViewer1.getReturnValue()))}function CreateAnnotation(n,t){WebAnnotationViewer1.CreateAnnotation(n,t)}function Delete(){var n=WebAnnotationViewer1.getSelectedAnnotations();WebAnnotationViewer1.DeleteAnnotations(n)}function SetText(){var n=document.getElementById("txtStampText").value;WebAnnotationViewer1.RemoteInvoke("InsertTextAnnotation",new Array(n))}function ApproveWarrant(){disableButtons();WebAnnotationViewer1.RemoteInvoked=remoteDoneHandler;WebAnnotationViewer1.RemoteInvoke("ApproveWarrant",new Array(enc))}function RejectWarrant(){disableButtons();document.getElementById("txtReason");var n=document.getElementById("txtReason").value;WebAnnotationViewer1.RemoteInvoked=remoteDoneHandler;WebAnnotationViewer1.RemoteInvoke("RejectWarrant",[enc,n])}function CancelWarrant(){disableButtons();WebAnnotationViewer1.RemoteInvoked=remoteDoneHandler;WebAnnotationViewer1.RemoteInvoke("CancelWarrant",new Array(enc))}function remoteDoneHandler(){WebAnnotationViewer1.RemoteInvoked=function(){};var t=WebAnnotationViewer1.getReturnValue(),n=t.split("|");n[0]==="-1"?ShowDialogBox("Error","ErrorMmessage: "+n[1]+"\nStackTrace: "+n[2],"Ok","","",!0):n[0]==="0"?ShowDialogBox("Warning",n[1],"Ok","","",!0):location.replace(document.referrer)}function disableButtons(){$("[id*=cmd]").prop("disabled",!0);setTimeout(function(){$("[id*=cmd]").prop("disabled",!1)},5e3)}function CloseDialog(){$("#dialog").dialog("close");_redirect&&location.replace(document.referrer)}function ShowDialogBox(n,t,i,r,u,f){var e;_redirect=f;e=i===""?"hidecss":"showcss";$("#lblMessage").html(t);$("#dialog").dialog({resizable:!1,title:n,modal:!0,width:"400px",height:"auto",bgiframe:!1,hide:{effect:"scale",duration:400},close:CloseDialog,buttons:[{text:i,"class":e,click:function(){$("#dialog").dialog("close")}}]})}function GetCustomTextList(){var n=$("#customTextList"),t="";n.empty();n.append('<li><span class="listItem">Per Schedule<\/span><\/li>');$.ajax({type:"GET",dataType:"json",url:"/DesktopModules/AWSModules/Warrants/api/HttpData/GetAnnotations/",success:function(i){if(i.length>0){for(var r=0;r<i.length;r++)c=i[r],t+='<li><span class="listItem">'+c.Text+'<\/span><a class="deletebutton" href="#" onclick="DeleteCustomTextFromList('+c.Value+'); return false;"><img class="deleteButton" src="/images/delete.gif" alt="Delete Item" /><\/a><\/li>';n.append(t)}},error:function(){ShowDialogBox("Warning","Error Retrieving Annotations.","Ok","","",!1)}})}function RepaintAnnotations(){var t,n;for(WebAnnotationViewer1.AnnotationCreated=emptyFunction,t=WebAnnotationViewer1.getAnnotations(),n=0;n<t.length;n++)t[n].Repaint();WebThumbnailViewer1.UpdateThumb(WebThumbnailViewer1.getSelectedIndex())}function CreateCustomTextAnnotation(n){var t=[];t.push(n);t.push(100);t.push(100);t.push(600);t.push(150);WebAnnotationViewer1.AnnotationCreated=annoCreated;WebAnnotationViewer1.RemoteInvoked=RepaintAnnotations;WebAnnotationViewer1.RemoteInvoke("RemoteCreateText",t)}function GetTextFromAnnotation(){var t=$("[id^='WebAnnotationViewer']"),n=!1;$("[class^='textdata']",t.contents()).each(function(){$(this).prev().css("display")!=="none"&&(n=!0,AddCustomTextToList($(this).val()))});n||ShowDialogBox("No Text Box Selected","Please select a textbox and try again.","Ok","","",!1)}function AddCustomTextToList(n){return $.ajax({type:"POST",cache:"false",url:"/DesktopModules/AWSModules/Warrants/api/HttpData/AddAnnotation/",data:{AnnotationText:n},success:function(){GetCustomTextList();ShowDialogBox("Notice","The selected text has been added to your list","Ok","","",!1)},error:function(){ShowDialogBox("Warning","Error Adding Custom Text.","Ok","","",!1)}}),!1}function DeleteCustomTextFromList(n){var i=confirm("Delete Selected Text?\n\nWARNING: This operation cannot be reversed."),t;return i&&(t="/DesktopModules/AWSModules/Warrants/api/HttpData/DeleteAnnotation/",$.ajax({type:"POST",cache:"false",url:t,data:{AnnotationId:n},success:function(){GetCustomTextList()},error:function(){ShowDialogBox("Warning","Error Adding Custom Text.","Ok","","",!1)}})),!1}function UpdateSelectedTextAnnotation(n){var i=$("[id^='WebAnnotationViewer']"),t=!1;$("[class^='textdata']",i.contents()).each(function(){$(this).prev().css("display")!=="none"&&(t=!0,$(this).val(n))});t||ShowDialogBox("No Text Box Selected","Please select a textbox and try again.","Ok","","",!1)}function annoCreated(n){n.annotation!==null&&(customAnnotation=n.annotation,setTimeout(setSelectedAnnotation,1e3))}function setSelectedAnnotation(){customAnnotation.setSelected(!0)}function emptyFunction(){return!1}Atalasoft.Utils.InitClientScript(myPageLoad);var enc=getParameterByName("enc"),status=1,customAnnotation=null,_redirect=!1;$(document).ready(function(){var n;$("#customTextList").on("click",".listItem",function(){var n=$(this).text();n!==""&&CreateCustomTextAnnotation(n);$("#dialog_customText").dialog("close")});n=$("#dialog_customText").dialog({autoOpen:!1,title:"Custom Text List",height:400,width:600,modal:!0,buttons:{Cancel:function(){n.dialog("close")}},close:function(){}});$("#showCustomTextList").on("click",function(){return n.dialog("open"),!1})});